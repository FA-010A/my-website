<!DOCTYPE html>
<html>
<head>
  <title>ファイル一覧</title>
</head>
<body>
  <h1>アップロード済ファイル一覧</h1>
  <div id="fileList">読み込み中...</div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
  apiKey: "AIzaSyB-Wck9-5KQJLVfWWhE8yBdaW5Jl_3XWis",
  authDomain: "my-website-2b713.firebaseapp.com",
  projectId: "my-website-2b713",
  storageBucket: "my-website-2b713.firebasestorage.app",
  messagingSenderId: "474696820051",
  appId: "1:474696820051:web:7cba8563bb4b025af7eda6",
  measurementId: "G-52N4LS8E57"
};

    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const listRef = storage.ref('uploads/');

    const fileListDiv = document.getElementById('fileList');
    fileListDiv.textContent = ''; // 初期化

    listRef.listAll().then((res) => {
      if (res.items.length === 0) {
        fileListDiv.textContent = 'ファイルが見つかりません';
        return;
      }

      res.items.forEach((itemRef) => {
        itemRef.getDownloadURL().then((url) => {
          const a = document.createElement('a');
          a.href = url;
          a.textContent = itemRef.name;
          a.target = '_blank';
          fileListDiv.appendChild(a);
          fileListDiv.appendChild(document.createElement('br'));
        });
      });
    }).catch((error) => {
      fileListDiv.textContent = 'エラー: ' + error.message;
    });
  </script>
</body>
</html>
